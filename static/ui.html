<!DOCTYPE html>
<html>
<head>
    <title>Scam Honey Pot UI</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #0f172a;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .container {
            background: #111827;
            padding: 20px;
            border-radius: 10px;
            width: 500px;
            box-shadow: 0px 0px 10px rgba(0,0,0,0.5);
        }
        h2 {
            text-align: center;
        }
        textarea, input, button {
            width: 100%;
            margin-top: 10px;
            padding: 8px;
        }
        textarea {
            height: 80px;
        }
        .output {
            background: #1f2933;
            padding: 10px;
            margin-top: 10px;
            border-radius: 5px;
            white-space: pre-wrap;
            font-size: 14px;
        }
    </style>
</head>
<body>

<div class="container">
    <h2>üïµÔ∏è Agentic Honey Pot</h2>

    <input id="session_id" placeholder="Session ID (e.g., test1)" value="demo1"/>

    <textarea id="message" placeholder="Enter scammer message...">
Your account is blocked. Call 9876543210 now.
    </textarea>

    <button onclick="sendMessage()">Send</button>

    <div class="output" id="response">
        Response will appear here...
    </div>
</div>

<script>
async function sendMessage() {
    const session_id = document.getElementById("session_id").value;
    const message = document.getElementById("message").value;

    const payload = {
        session_id: session_id,
        message: message
    };

    try {
        const res = await fetch("/chat", {
            method: "POST",
            headers: {"Content-Type": "application/json"},
            body: JSON.stringify(payload)
        });

        const data = await res.json();

        document.getElementById("response").innerText =
            "Reply: " + data.reply + "\n\n" +
            "Scam: " + data.scam + "\n\n" +
            "Extracted:\n" + JSON.stringify(data.extracted, null, 2);

    } catch (e) {
        document.getElementById("response").innerText = "Error: " + e;
    }
}
</script>

</body>
</html>
